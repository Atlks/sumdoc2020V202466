<!--STATUS OK-->
  <meta http-equiv="Content-Type" content="text/html;charset=gb2312">
  <base href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx">
  <style>
  body{margin:4px 0}
  #bd_sn_h{text-align:left;background-color:#ffffff;color:#000000}
  #bd_sn_h #p1{clear:both;font:14px Arial;margin:0 0 0 2px;padding:4px 0 0 0}
  #bd_sn_h a{color:#0000ff;text-decoration:underline}
  #bd_sn_h #p1 a{font-weight:bold}
  #baidu div{position:static}
  </style>

<table id="baidu" width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td>
  <div style="text-align:left;background-color:#ffffff;color:#000000">
    <div style="margin:6px 18px 0 10px;float:left"><a href="http://www.baidu.com"><img style="border:0px" alt="到百度首页" src="http://img.baidu.com/img/logo-kz.gif"></a></div>
    <div style="margin:27px 0 0 0;float:left">
      <form style="margin:0;padding:0" action="http://www.baidu.com/s"> 
      <input name="wd" size="35" style="font:16px Arial"> <input type="submit" value="百度一下">
      <input name="cl" type="hidden" value="3">
   	  </form>
    </div>
	<p style="clear:both;font:14px Arial;margin:0 0 0 2px;padding:4px 0 0 0;width:100%;text-align:left;background-color:#ffffff;color:#000000">您查询的关键词是：<B style='color:black;background-color:#ffff66'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap0>deleted</a>&nbsp;</B><B style='color:black;background-color:#A0FFFF'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap1>object</a>&nbsp;</B><B style='color:black;background-color:#99ff99'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap2>would</a>&nbsp;</B><B style='color:black;background-color:#ff9999'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap3>be</a>&nbsp;</B><B style='color:black;background-color:#ff66ff'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap4>re-saved</a>&nbsp;</B><B style='color:white;background-color:#886800'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap7>by</a>&nbsp;</B><B style='color:white;background-color:#004699'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap8>cascade</a>&nbsp;</B><B style='color:white;background-color:#990099'><a href=http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu#baidusnap9>remove</a>&nbsp;</B> 。如果打开速度慢，可以尝试<a style="color:#0000ff;text-decoration:underline;font-weight:bold" href="http://cache.baidu.com/c?word=deleted%2Cobject%2Cwould%2Cbe%2Cre%3B%2D%3Bsaved%2Cby%2Ccascade%2Cremove%2Cfrom%2Casso&url=http%3A//blog%2Ecsdn%2Enet/totogogo/archive/2007/12/09/1925337%2Easpx&p=882a9345809d01e501be9b7f0e4088&user=baidu&fast=y">快速版</a>；如果想保存快照，可以<a style="color:#0000ff;text-decoration:underline;font-weight:bold" onclick="window.open('http://cang.baidu.com/do/add?it='+encodeURIComponent(document.title)+'&amp;iu='+encodeURIComponent(location.href)+'&amp;fr=ps#nw=1','_s','scrollbars=no,width=600,height=450,right=75,top=20,status=no,resizable=yes'); return false;" href="http://cang.baidu.com/do/add" target="_blank">添加到搜藏</a>。</p>
	<p style="font:12px Arial;color:gray;margin:0 2px;width:100%text-align:left;background-color:#ffffff">(百度和网页<a style="color:#0000ff;text-decoration:underline" href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx">http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx</a>的作者无关，不对其内容负责。百度快照谨为网络故障时之索引，不代表被搜索网站的即时页面。)</p>
	<hr style="margin:8px 0;width:100%">
  </div>
</td></tr>
</table>
  <div style="position:relative">
  
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>解决org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations) - Tomson Xu - CSDNBlog</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="tomsonxu,hibernate, ObjectDeletedException, cascade">
    <meta name="description" content="解决org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations)">
    
    
    
    
    <link rel="stylesheet" href="http://blog.csdn.net/css/tabber.css" TYPE="text/css" MEDIA="screen">
    
<link rel="Shortcut Icon" href="http://profile.csdn.net/totogogo/picture/1.ico" >
    
<link href="/skins/Cogitation/style.css" type="text/css" rel="stylesheet" media="all" >
<link href="/skins/Cogitation/print.css" type="text/css" rel="stylesheet" media="print" >
<link href="http://blog.csdn.net/totogogo/rss.aspx" title="RSS" type="application/rss+xml" rel="alternate" >
</head>
<body>

    <form name="Form1" method="post" action="1925337.aspx" id="Form1">
<input type="hidden" name="__VIEWSTATE" id="
__VIEWSTATE" value="" />



        
<div id="top">
    
<div>
	<table>
		<tr>
			<td class="HeaderTitles">
				<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://blog.csdn.net/totogogo/">Tomson Xu</a></h1>
				<p id="tagline"><span id="TopicAuthor" style="display: none">totogogo</span></p>
			</td>
		</tr>
	</table>
</div>
<div class="HeaderBar">
	<table id="HeaderBar" class="HeaderBar">
		<tr>
			<td class="HeaderBarTab" nowrap>
				
&nbsp;
<a href="http://www.csdn.net" target="_blank">CSDN</a>&nbsp;|&nbsp;
   <a href="http://dev.csdn.net/" target="_blank">技术中心</a>&nbsp;|&nbsp;
<a id="Header1_MyLinks1_HomeLink" title="到聚合站点" href="http://blog.csdn.net" target="_blank">BLOG首页</a>&nbsp;|&nbsp;
<a id="Header1_MyLinks1_PersonalHome" title="访问 Tomson Xu" href="http://blog.csdn.net/totogogo/" target="_blank">我的首页</a>&nbsp;|&nbsp;
<a id="Header1_MyLinks1_MyArticles" title="查看 Tomson Xu 所有文章" href="http://blog.csdn.net/totogogo/MyArticles.aspx" target="_blank">我的文章</a>&nbsp;|&nbsp;
<a id="Header1_MyLinks1_MySpace" title="查看 tomsonxu 的个人空间" href="http://hi.csdn.net/totogogo/profile" target="_blank"><font color="red">我的空间</font></a>&nbsp;|&nbsp;
<a id="Header1_MyLinks1_ContactLink" accesskey="9" href="http://blog.csdn.net/totogogo/contact.aspx">联系作者</a>&nbsp;|&nbsp;

<a id="Header1_MyLinks1_HyperLink1" href="http://search.csdn.net/search_blog.asp" target="_blank">搜索</a>&nbsp;|&nbsp;
<a id="Header1_MyLinks1_Admin" href="http://writeblog.csdn.net/">写文章</a>
<img id="Header1_BlueTab" src="/Skins/Cogitation/Images/BlueTabRight.jpg" align="absmiddle" border="0" />
			</td>
			<td class="HeaderBarTabBack" nowrap width="100%">
				
<div class="BlogStatsBar">
	<table class="BlogStatsBar">
		<tr>
			<td width="100%">
			</td>
			<td class="BlogStatsBar" nowrap>
				&nbsp;
				50篇原创:
				3篇翻译:
				18篇转载:
				16140次点击:
				2个评论:
				0个Trackbacks
			</td>
		</tr>
	</table>
</div>

			</td>
		</tr>
	</table>
</div>



</div>
<div id="leftmenu">
    
        

<h3>公告</h3>


<div id="News1_pnlMyResume">
	
<br/><h3>我的简历</h3>
<div id="job_csdn_net_sr"></div>

</div>
        
        <span id="SubscriptionList"><h3 class="listtitle">订阅博客</h3><ul class="list"><li class="listitem"><a href="http://blog.csdn.net/totogogo/Rss.aspx" ><img border="0" alt="XML聚合" src="/images/xml.gif" /></a>&nbsp;&nbsp;<a href="http://feeds.feedsky.com/csdn.net/totogogo" target="_blank"><img border="0" alt="FeedSky" src="/images/feedsky.gif" /></a></li><li class="listitem"><a href="http://www.xianguo.com/subscribe.php?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到鲜果" src="/images/rss_xianguo.jpg"/></a></li><li class="listitem"><a href="http://fusion.google.com/add?feedurl=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到Google" src="/images/rss_google.gif"/></a></li><li class="listitem"><a href="http://www.zhuaxia.com/add_channel.php?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到抓虾" src="/images/rss_zhuaxia.gif"/></a></li><li class="listitem"><a href="http://www.bloglines.com/sub/http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到BlogLines" src="/images/rss_bloglines.gif"/></a></li><li class="listitem"><a href="http://add.my.yahoo.com/rss?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到Yahoo" src="/images/rss_yahoo.gif"/></a></li><li class="listitem"><a href="http://rss.gougou.com/find_rss.jsp?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到GouGou" src="/images/rss_gougou.gif"/></a></li><li class="listitem"><a href="http://www.pageflakes.com/subscribe.aspx?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到飞鸽" src="/images/rss_pageflakes.gif"/></a></li><li class="listitem"><a href="http://www.rojo.com/add-subscription?resource=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到Rojo" src="/images/rss_rojo.gif"/></a></li><li class="listitem"><a href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到newsgator" src="/images/rss_newsgator.gif"/></a></li><li class="listitem"><a href="http://www.netvibes.com/subscribe.php?url=http://blog.csdn.net/totogogo/Rss.aspx" target="_blank"><img border="0" alt="订阅到netvibes" src="/images/rss_netvibes.gif"/></a></li></ul></span>
        <span id="RecentVisitors"></span>
        <h3 class="listtitle">文章</h3>
<ul class="list"><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/325668.aspx">CF NET</a><a href="http://blog.csdn.net/totogogo/category/325668.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/295627.aspx">Eclipse</a><a href="http://blog.csdn.net/totogogo/category/295627.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/318670.aspx">EJB3</a><a href="http://blog.csdn.net/totogogo/category/318670.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/350367.aspx">Hibernate</a><a href="http://blog.csdn.net/totogogo/category/350367.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/349565.aspx">JBoss</a><a href="http://blog.csdn.net/totogogo/category/349565.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/336455.aspx">LSL</a><a href="http://blog.csdn.net/totogogo/category/336455.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/354019.aspx">maven</a><a href="http://blog.csdn.net/totogogo/category/354019.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/349809.aspx">mysql</a><a href="http://blog.csdn.net/totogogo/category/349809.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/296268.aspx">Spring</a><a href="http://blog.csdn.net/totogogo/category/296268.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/350266.aspx">Unit Test</a><a href="http://blog.csdn.net/totogogo/category/350266.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/349577.aspx">web service</a><a href="http://blog.csdn.net/totogogo/category/349577.aspx/rss">(RSS)</a></li><li class="listitem"><a href="http://blog.csdn.net/totogogo/category/350591.aspx">其他</a><a href="http://blog.csdn.net/totogogo/category/350591.aspx/rss">(RSS)</a></li></ul><h3 class="listtitle">收藏</h3>
<ul class="list"></ul><h3 class="listtitle">相册</h3><!--category title-->
<ul class="list"></ul><h3 class="listtitle">存档</h3>
<ul class="list"><li><a href="/totogogo/archive/2007/12.aspx">2007年12月(16)</a></li><li><a href="/totogogo/archive/2007/11.aspx">2007年11月(7)</a></li><li><a href="/totogogo/archive/2007/10.aspx">2007年10月(6)</a></li><li><a href="/totogogo/archive/2007/09.aspx">2007年09月(1)</a></li><li><a href="/totogogo/archive/2007/08.aspx">2007年08月(4)</a></li><li><a href="/totogogo/archive/2007/07.aspx">2007年07月(16)</a></li><li><a href="/totogogo/archive/2007/05.aspx">2007年05月(12)</a></li><li><a href="/totogogo/archive/2007/04.aspx">2007年04月(9)</a></li></ul>
			
		

        <span id="Anthem_RecentComments_ltlComments__"><span id="RecentComments_ltlComments"><h3 class="listtitle">最近评论</h3>
<ul class="list"><li class="listitem">xubin_xubin：<a href="http://blog.csdn.net/totogogo/archive/2007/08/15/1743411.aspx#740887" Title="点击查看《回复:《spring 2.0 in action》点滴 (1)》">谢谢楼主</a></li><li class="listitem">tanwang_xd：<a href="http://blog.csdn.net/totogogo/archive/2007/07/16/1694070.aspx#719240" Title="点击查看《回复:Entity Bean (1) [转]》">您好：<br />@GeneratedValue(strategy = ？)<br />为了方便删除，我想要做到如下效果：当删掉一个记录后，后面的记录的id主动向前移一位（减一），这样就能保证id的整齐，不会导致id溢出。<br />您能指导我实现此功能么？　hibernate annotations <br /></a></li></ul>
	
</span></span>

    
    <br />
    <br />
</div>
<div id="main">
    
           <span id="viewpost.ascx_PreviousAndNextEntriesUp" class="PreAndNext"><div align="center"><a href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925345.aspx">上一篇:&nbsp;hibernate的一个批处理问题！</a>&nbsp;|&nbsp;<a href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925309.aspx">下一篇:&nbsp;Hibernate Tip: 使用JBOSS MBEAN时，Session会在事务提交后自动关闭！ </a></div></span><br />
<div class="post">	<div class="postTitle">		<a name=baidusnap0></a><a name=baidusnap1></a><a name=baidusnap2></a><a name=baidusnap3></a><a name=baidusnap4></a><a name=baidusnap7></a><a name=baidusnap8></a><a name=baidusnap9></a><a href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx"><img src='/images/authorship.gif' border='0' width='15' height='13' />&nbsp;解决org.hibernate.ObjectDeletedException: <B style='color:black;background-color:#ffff66'>deleted</B> <B style='color:black;background-color:#A0FFFF'>object</B> <B style='color:black;background-color:#99ff99'>would</B> <B style='color:black;background-color:#ff9999'>be</B> <B style='color:black;background-color:#ff66ff'>re-saved</B> <B style='color:white;background-color:#886800'>by</B> <B style='color:white;background-color:#004699'>cascade</B> (<B style='color:white;background-color:#990099'>remove</B> <B style='color:black;background-color:#ffff66'>deleted</B> <B style='color:black;background-color:#A0FFFF'>object</B> from associations)</a>&nbsp;&nbsp	</div>				<div class="postText">		<p>相关代码：<br />===============================================<br />public class <font color="#0000ff">VoteQuestion</font> {<br />&nbsp;&nbsp;&nbsp; <font color="#0000ff">private Set options = new HashSet();<br /></font>&nbsp;&nbsp;&nbsp; 。。。</p><p>&nbsp;/**<br />&nbsp; * @hibernate.set <B style='color:white;background-color:#004699'>cascade</B> = &quot;all&quot; table = &quot;VOTE_OPTION&quot; inverse =<br />&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;true&quot; lazy = &quot;true&quot; order-<B style='color:white;background-color:#886800'>by</B> = &quot;id&quot;<br />&nbsp; * <br />&nbsp; * @hibernate.collection-one-to-many class =<br />&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;eorg.etoken.pojo.VoteOption&quot;<br />&nbsp; * <br />&nbsp; * @hibernate.collection-key column = &quot;QUESTION_ID&quot;<br />&nbsp; */<br />&nbsp;public Set getOptions() {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return options;<br />&nbsp;}</p><p>}</p><p>public class <font color="#0000ff">VoteOption</font> {<br />&nbsp;&nbsp;&nbsp; private <font color="#0000ff">VoteQuestion question;<br /></font>&nbsp;&nbsp; &nbsp;。。。。</p><p>&nbsp;/**<br />&nbsp; * @hibernate.many-to-one class = &quot;eorg.etoken.pojo.VoteQuestion&quot; <B style='color:white;background-color:#004699'>cascade</B> =<br />&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;none&quot; not-null = &quot;true&quot; column = &quot;QUESTION_ID&quot;<br />&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; update = &quot;false&quot;<br />&nbsp; */<br />&nbsp;public VoteQuestion getQuestion() {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return question;<br />&nbsp;}</p><p>}</p><p>public class <font color="#0000ff">VoteServiceImpl</font>{<br />&nbsp;。。。<br />&nbsp;public void <font color="#0000ff">deleteVoteOption</font>(int optionId) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Transaction tx = session.beginTransaction();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VoteOption option = (VoteOption) session.load(VoteOption.class, new Long(optionId));<br /><font color="#ff0000"><strong>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;session.delete(option);</strong></font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tx.commit();<br />&nbsp;}<br />}</p><p>===============================================</p><p><strong><font color="#ff0000">当调用VoteServiceImpl的deleteVoteOption方法时，就会抛出下列Exception:<br /></font><font color="#0000ff">org.hibernate.ObjectDeletedException: <B style='color:black;background-color:#ffff66'>deleted</B> <B style='color:black;background-color:#A0FFFF'>object</B> <B style='color:black;background-color:#99ff99'>would</B> <B style='color:black;background-color:#ff9999'>be</B> <B style='color:black;background-color:#ff66ff'>re-saved</B> <B style='color:white;background-color:#886800'>by</B> <B style='color:white;background-color:#004699'>cascade</B> (<B style='color:white;background-color:#990099'>remove</B> <B style='color:black;background-color:#ffff66'>deleted</B> <B style='color:black;background-color:#A0FFFF'>object</B> from associations)</font></strong></p><p><font color="#ff00ff" size="3"><strong>原因是votequestion与voteoption有连带关系，不能直接删除voteoption，而应该从votequestion里<B style='color:white;background-color:#990099'>remove</B> voteoption！</strong></font></p><p>因此上面的deleteVoteOption方法只需要修改一行即可，见下面代码</p><p>===============================================<br />&nbsp;public void deleteVoteOption(int optionId) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Transaction tx = session.beginTransaction();<br />&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;VoteOption option = (VoteOption) session.load(VoteOption.class, new Long(optionId));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><font color="#ff0000">option.getQuestion().getOptions().<B style='color:white;background-color:#990099'>remove</B>(option);</font></strong><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tx.commit();<br />&nbsp;}<br />===============================================<br />&nbsp;</p><br><br><p id="TBPingURL">Trackback: http://tb.blog.csdn.net/TrackBack.aspx?PostId=1925337</p>		<br>	</div>	<div class="postFoot">						[<a href="JavaScript:d=document;t=d.selection?(d.selection.type!='None'?d.selection.createRange().text:''):(d.getSelection?d.getSelection():'');void(saveit=window.open('http://wz.csdn.net/storeit.aspx?t='+escape(d.title)+'&u='+escape(d.location.href)+'&c='+escape(t),'keyit','scrollbars=no,width=590,height=300,left=75,top=20,status=no,resizable=yes'));saveit.focus();" title="功能强大的网络收藏夹，一秒钟操作就可以轻松实现保存带来的价值、分享带来的快乐" >收藏到我的网摘</a>]&nbsp;&nbsp;		[<a href="http://tb.blog.csdn.net/TrackBack.aspx?PostId=1925337">发送Trackback]</a>&nbsp;&nbsp;tomsonxu发表于		2007年12月09日 01:31:00	</div></div><link rel="pingback" href="http://blog.csdn.net/totogogo/Services/Pingback.aspx" /><!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"xmlns:dc="http://purl.org/dc/elements/1.1/"xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"><rdf:Descriptionrdf:about="http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx"dc:identifier="http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx"dc:title="解决org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations)"trackback:ping="http://tb.blog.csdn.net/TrackBack.aspx?PostId=1925337" /></rdf:RDF>--><br><br />
<br /><br />
<div id="csdn_zhaig_ad_yahoo" class="post" ></div>
<span id="viewpost.ascx_PreviousAndNextEntriesDown" class="PreAndNext"><div align="center"><a href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925345.aspx">上一篇:&nbsp;hibernate的一个批处理问题！</a>&nbsp;|&nbsp;<a href="http://blog.csdn.net/totogogo/archive/2007/12/09/1925309.aspx">下一篇:&nbsp;Hibernate Tip: 使用JBOSS MBEAN时，Session会在事务提交后自动关闭！ </a></div></span>
<span id="Anthem_Comments.ascx_ltlComments__"><span id="Comments.ascx_ltlComments"><br>
<div id="comments">
	<h3>评论</h3>
	没有评论。 
		
</div>
</span></span>

<div>


</div>

<div id="commentform" class="CommentForm">
	<h3>发表评论
    </h3>
	<div id="Anthem_PostComment.ascx_CommentUpdatePanel__"><div id="PostComment.ascx_CommentUpdatePanel">
	 
	<TABLE class="CommentForm">
		<TR>
			<TD height="0" width="69"></TD>
			<TD>
				
			</TD>
		</TR>
		<TR>
			<TD width="70px">大名：</TD>
			<TD align="left">
				<input name="PostComment.ascx:tbName" type="text" maxlength="32" id="PostComment.ascx_tbName" disabled="disabled" Size="40" />
				
			</TD>
		</TR>
		<TR>
			<TD width="70px">网址：</TD>
			<TD align="left">
				<input name="PostComment.ascx:tbUrl" type="text" maxlength="256" id="PostComment.ascx_tbUrl" disabled="disabled" Size="40" />
			</TD>
		</TR>
		<div id="PostComment.ascx_AntiBotImageRegion">
		
        <tr>
            <td width="70">
                校验码：</td>
            <td align="left">
                <input name="PostComment.ascx:tbAntiBotImage" type="text" id="PostComment.ascx_tbAntiBotImage" />
                 
                <span id="Anthem_PostComment.ascx_imgAntiBotImage__"><img id="PostComment.ascx_imgAntiBotImage" src="/AntiBotImage.aspx?abi=9386&amp;id=1925337" alt="" align="absmiddle" border="0" /></span>
                <span id="Anthem_PostComment.ascx_lbCreateAntiBotImage__"><a onclick="javascript:Anthem_FireCallBackEvent(this,event,'PostComment.ascx:lbCreateAntiBotImage','',false,'','','',true,null,null,null,true,true);return false;" id="PostComment.ascx_lbCreateAntiBotImage" href="javascript:__doPostBack('PostComment.ascx$lbCreateAntiBotImage','')">看不清,换一张</a></span>
                </td>
        </tr>
        
	</div>
		<TR>
			<TD colSpan="3">评论&nbsp;
				
				<BR>
				<textarea name="PostComment.ascx:tbComment" rows="10" cols="50" id="PostComment.ascx_tbComment" disabled="disabled"></textarea>
			</TD>
		</TR>
		<TR>
			<TD colspan="3">
				<span id="Anthem_PostComment.ascx_btnSubmit__"></span>&nbsp;&nbsp;&nbsp;
				</TD>
		</TR>
		<tr>
			<TD colspan="3">
				<span id="PostComment.ascx_Message"><font color="Red">当前用户设置只有注册用户才能发表评论。如果你没有登录，请点击<a href="http://passport.csdn.net/member/UserLogin.aspx?from=http://blog.csdn.net/totogogo/archive/2007/12/09/1925337.aspx">登录</a></font></span>
			</TD>
		</tr>
	</TABLE>
	
</div></div>

</div>
 
            
</div>

<p id="footer">
	Powered <B style='color:white;background-color:#886800'>by</B>: 
	<br />
	<a id="Footer1_Hyperlink2" NAME="Hyperlink1" href="http://scottwater.com/blog"><img src="/images/100x30_Logo.gif" border="0" /></a>
	<a id="Footer1_Hyperlink3" NAME="Hyperlink1" href="http://ASP.NET"><img src="/images/PoweredByAsp.Net.gif" border="0" /></a>
	<br />
	Copyright &copy; tomsonxu
</p>



        
    </form>
</body>
</html>


